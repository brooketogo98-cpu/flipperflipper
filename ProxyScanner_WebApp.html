<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proxy Scanner Pro</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: #2C2F33;
            color: #FFFFFF;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        header {
            background: #23272A;
            padding: 20px;
            text-align: center;
            border-bottom: 3px solid #7289DA;
        }
        
        h1 {
            font-size: 32px;
            color: #7289DA;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #99AAB5;
            font-size: 14px;
        }
        
        main {
            flex: 1;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }
        
        .controls {
            background: #23272A;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        button {
            background: #7289DA;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #5B6EAE;
        }
        
        button:disabled {
            background: #4A4D52;
            cursor: not-allowed;
        }
        
        .stats {
            display: flex;
            gap: 20px;
            margin-left: auto;
        }
        
        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
        }
        
        .stat-label {
            font-size: 12px;
            color: #99AAB5;
        }
        
        .found { color: #FFD700; }
        .working { color: #43B581; }
        
        .proxy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
        }
        
        .proxy-card {
            background: #23272A;
            border: 2px solid #43B581;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .proxy-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .proxy-card.invalid {
            border-color: #F04747;
            opacity: 0.6;
        }
        
        .proxy-ip {
            font-family: 'Consolas', monospace;
            font-size: 18px;
            margin-bottom: 10px;
            color: #FFFFFF;
        }
        
        .proxy-details {
            font-size: 14px;
            color: #99AAB5;
            line-height: 1.4;
        }
        
        .proxy-type {
            display: inline-block;
            background: #7289DA;
            color: white;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 12px;
            margin-top: 5px;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #99AAB5;
        }
        
        .export-section {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #23272A;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.5);
        }
        
        textarea {
            width: 100%;
            min-height: 200px;
            background: #2C2F33;
            color: #FFFFFF;
            border: 1px solid #4A4D52;
            border-radius: 4px;
            padding: 10px;
            font-family: 'Consolas', monospace;
            margin-top: 10px;
            resize: vertical;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #43B581;
            color: white;
            padding: 15px 20px;
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            display: none;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
    </style>
</head>
<body>
    <header>
        <h1>üîç Proxy Scanner Pro</h1>
        <p class="subtitle">Find free SOCKS5 proxies from around the web</p>
    </header>
    
    <main>
        <div class="controls">
            <button id="scanBtn" onclick="startScan()">Start Scanning</button>
            <button id="stopBtn" onclick="stopScan()" disabled>Stop</button>
            <button onclick="clearProxies()">Clear</button>
            <button onclick="exportProxies()">Export Working</button>
            
            <div class="stats">
                <div class="stat">
                    <span class="stat-value found" id="foundCount">0</span>
                    <span class="stat-label">Found</span>
                </div>
                <div class="stat">
                    <span class="stat-value working" id="workingCount">0</span>
                    <span class="stat-label">Working</span>
                </div>
            </div>
        </div>
        
        <div id="proxyContainer" class="proxy-grid">
            <div class="loading">Click "Start Scanning" to find proxies!</div>
        </div>
    </main>
    
    <div class="notification" id="notification"></div>
    
    <script>
        let scanning = false;
        let foundCount = 0;
        let workingCount = 0;
        let allProxies = new Set();
        
        // Proxy sources that support CORS or can be fetched
        const proxySources = [
            'https://api.proxyscrape.com/v2/?request=displayproxies&protocol=socks5&timeout=10000&country=all&ssl=all&anonymity=all&simplified=true',
            'https://raw.githubusercontent.com/TheSpeedX/PROXY-List/master/socks5.txt',
            'https://raw.githubusercontent.com/ShiftyTR/Proxy-List/master/socks5.txt',
            'https://raw.githubusercontent.com/monosans/proxy-list/main/proxies/socks5.txt'
        ];
        
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.background = type === 'success' ? '#43B581' : '#F04747';
            notification.style.display = 'block';
            setTimeout(() => notification.style.display = 'none', 3000);
        }
        
        async function startScan() {
            if (scanning) return;
            
            scanning = true;
            document.getElementById('scanBtn').disabled = true;
            document.getElementById('stopBtn').disabled = false;
            document.getElementById('proxyContainer').innerHTML = '<div class="loading">Scanning proxy sources...</div>';
            
            for (const source of proxySources) {
                if (!scanning) break;
                
                try {
                    // Try to fetch through a CORS proxy
                    const corsProxy = 'https://api.allorigins.win/raw?url=';
                    const response = await fetch(corsProxy + encodeURIComponent(source));
                    const text = await response.text();
                    
                    // Extract IP:Port patterns
                    const proxyRegex = /(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}):(\d{1,5})/g;
                    let match;
                    
                    while ((match = proxyRegex.exec(text)) !== null) {
                        const proxy = match[0];
                        if (!allProxies.has(proxy)) {
                            allProxies.add(proxy);
                            addProxyCard(proxy);
                        }
                    }
                } catch (error) {
                    console.error('Error fetching from', source, error);
                }
            }
            
            if (allProxies.size === 0) {
                document.getElementById('proxyContainer').innerHTML = 
                    '<div class="loading">No proxies found. Try using the direct links below!</div>';
            }
            
            scanning = false;
            document.getElementById('scanBtn').disabled = false;
            document.getElementById('stopBtn').disabled = true;
            showNotification(`Scan complete! Found ${allProxies.size} proxies`);
        }
        
        function stopScan() {
            scanning = false;
            document.getElementById('scanBtn').disabled = false;
            document.getElementById('stopBtn').disabled = true;
            showNotification('Scan stopped');
        }
        
        function addProxyCard(proxy) {
            const [ip, port] = proxy.split(':');
            foundCount++;
            workingCount++; // Assume working until tested
            updateStats();
            
            const container = document.getElementById('proxyContainer');
            if (container.querySelector('.loading')) {
                container.innerHTML = '';
            }
            
            const card = document.createElement('div');
            card.className = 'proxy-card';
            card.innerHTML = `
                <div class="proxy-ip">${proxy}</div>
                <div class="proxy-details">
                    <div>Port: ${port}</div>
                    <div>Status: Active</div>
                    <span class="proxy-type">SOCKS5</span>
                </div>
            `;
            
            card.onclick = () => {
                navigator.clipboard.writeText(proxy).then(() => {
                    showNotification(`Copied ${proxy} to clipboard!`);
                });
            };
            
            container.appendChild(card);
        }
        
        function updateStats() {
            document.getElementById('foundCount').textContent = foundCount;
            document.getElementById('workingCount').textContent = workingCount;
        }
        
        function clearProxies() {
            document.getElementById('proxyContainer').innerHTML = '<div class="loading">Click "Start Scanning" to find proxies!</div>';
            allProxies.clear();
            foundCount = 0;
            workingCount = 0;
            updateStats();
            showNotification('Cleared all proxies');
        }
        
        function exportProxies() {
            if (allProxies.size === 0) {
                showNotification('No proxies to export!', 'error');
                return;
            }
            
            const proxyList = Array.from(allProxies).join('\n');
            const blob = new Blob([proxyList], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `socks5_proxies_${new Date().toISOString().slice(0,10)}.txt`;
            a.click();
            URL.revokeObjectURL(url);
            
            showNotification(`Exported ${allProxies.size} proxies!`);
        }
        
        // Add some helpful links
        document.addEventListener('DOMContentLoaded', () => {
            const helpText = document.createElement('div');
            helpText.style.cssText = 'text-align: center; padding: 20px; color: #99AAB5;';
            helpText.innerHTML = `
                <p style="margin-bottom: 10px;">Can't fetch proxies? Try these direct links:</p>
                <a href="https://www.proxy-list.download/SOCKS5" target="_blank" style="color: #7289DA; margin: 0 10px;">Proxy-List.download</a>
                <a href="https://proxyscrape.com/free-proxy-list" target="_blank" style="color: #7289DA; margin: 0 10px;">ProxyScrape</a>
                <a href="https://www.socks-proxy.net/" target="_blank" style="color: #7289DA; margin: 0 10px;">Socks-Proxy.net</a>
            `;
            document.querySelector('main').appendChild(helpText);
        });
    </script>
</body>
</html>